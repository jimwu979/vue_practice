"use strict";!function(){function s(){for(var e="",t=$("#select_market li").length,s=0;s<t;s++)$("#select_market li").eq(s).hasClass("now")&&(e+=$("#select_market li").eq(s).attr("data-market"));for(var a="",n=$("#select_weather li").length,s=0;s<n;s++)$("#select_weather li").eq(s).hasClass("now")&&(a+=$("#select_weather li").eq(s).attr("data-weather"));!function(e,t,s){$("#subject").html("").css("left","0").parent().animate({scrollLeft:0},200),template.sort(function(e,t){return e[s]>t[s]?1:-1});for(var a=0,n=template.length,i=0;i<n;i++){var l=template[i],r=l[s]<0?"lower":"higher";0<=e.indexOf(l.market)&&0<=t.indexOf(l.weather)&&(a+=Number(l.fund_length),$("#subject").prepend('<div       data-market="'+l.market+'"           data-weather="'+l.weather+'"           data-fund_length = "'+l.fund_length+'"           data-ajax_url = "'+l.ajax_url+'"           data-market_report ="'+l.market_report+'"     >   <h3>'+l.title+'</h3>   <img class="weather" src="img/'+l.weather+'.svg">   <img class="line_graph" src="img/'+l.line_graph+'">   <div class="'+r+'">'+l[s]+"%</div></div>"))}$("#subject > div").addClass("reload");var o=$(window).width(),d=768<=o,h=d?180:158,c=d?22:7,v=d?4:2,g=$("#subject > div").length;0==g?$("#slideshow").addClass("null"):$("#slideshow").removeClass("null");var w=Math.ceil(g/v)*(8+h)+c+15;$("#subject").width(w);var m=$("#operating ul"),u=767<(o=$(window).width())?16:500<o?6:4,p=Math.ceil($("#subject > div").length/u);if(m.html(""),1<p){for(i=0;i<p;i++)m.append("<li></li>");$("#moving_btn").children().eq(1).addClass("show").siblings().removeClass("show")}else $("#moving_btn").children().removeClass("show");m.children("li").eq(0).addClass("now"),$("#object_title").text("").css("padding","0").siblings("#fund_length").text(a),$("#report").attr("href","").siblings("#move_down").removeClass("show"),setTimeout(function(){$("#subject > div:nth-of-type(1)").trigger("click")},0)}(e,a,$("#nowSort").attr("data-sort"))}function i(e,t){var s=t||$(this);s.addClass("now").siblings().removeClass("now");var a=s.index(),n=$(window).width(),i=!(767<n)||0==a?0:30,l=767<n?4*($("#subject > div").width()+2+8):500<n?3*($("#subject > div").width()+2+8):2*($("#subject > div").width()+2+8),r=l*a*-1+i;$("#subject").css("left",r);var o=s.parent().children().length-1,d=s.parent().siblings("#moving_btn").children();0==a?d.eq(0).removeClass("show"):d.eq(0).addClass("show"),a==o?d.eq(1).removeClass("show"):d.eq(1).addClass("show")}function e(){var e=event.pageX?event.pageX:event.touches[0].clientX;$(this).attr("start_X",e)}function t(){var e,t,s,a,n=$(this);"0"==n.attr("move_lock")&&(n.attr("move_lock","1"),e=event.pageX,e=event.pageX?event.pageX:event.touches[0].clientX,t=0<n.attr("start_X")-e?-1:1,console.log(t),(s=n.siblings("#operating").find("li.now").index()-t)>=n.siblings("#operating").find("li").length?s--:s<0&&(s=0),a=n.siblings("#operating").find("li").eq(s),i(event,a),setTimeout(function(){n.attr("move_lock","0")},500))}s(),$("#sort").mouseleave(function(){$(this).removeClass("open")}).children("#nowSort").click(function(){$(this).parent().toggleClass("open")}).siblings("ul").children("li").on({mouseover:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){var e=$(this),t=e.attr("data-sort");e.parent().siblings("#nowSort").text(e.text()).attr("data-sort",t).parent().removeClass("open"),s()}}),$("#filter li").click(function(){var e=$(this);e.toggleClass("now"),0==e.index()?e.siblings().removeClass("now"):e.siblings().eq(0).removeClass("now"),0==e.parent().children("li.now").length&&e.parent().children("li:nth-child(1)").addClass("now"),s()}),$("#operating button").click(function(){var e,t,s,a,n,i,l=$(this),r=l.parents("#operating").find("li.now").index(),o=0==l.parent().index()?1:-1;(r<+l.parents("#operating").find("li").length&&-1==o||0<r&&1==o)&&(e=l.parents("#operating").siblings("#subject"),s=r*(t=4*($("#subject > div").width()+2+8))*-1+(r-o==0?0:30)+o*t,e.css("left",s),a=r-o,l.parents("#operating").find("li").eq(a).addClass("now").siblings().removeClass("now"),n=l.parents("#operating").find("li").length,i=l.parents("#moving_btn").children("div"),a==n-1?i.eq(1).removeClass("show"):0==a&&i.eq(0).removeClass("show"),0!=a&&i.eq(0).addClass("show"),a!=n-1&&i.eq(1).addClass("show"))}),$("#operating ul").on("click","li",i),$("#subject").on("click","> div",function(){var e=$(this);e.addClass("now").siblings().removeClass("now");var t=e.children("h3").text(),s=e.attr("data-fund_length"),a=e.attr("data-market_report");$("#object_title").text(t).removeAttr("style").siblings().text(s).parents("#total").siblings("#report").attr("href",a).siblings("#move_down").addClass("show"),e.attr("data-ajax_url")}).on({touchstart:e,dragstart:e,touchmove:t,drag:t}),$("#move_down").click(function(){var e=$(this);e.removeClass("show");var t=e.siblings("#report").offset().top;$("html, body").animate({scrollTop:t},200)}),$(window).scroll(function(){$("#move_down").removeClass("show")})}();